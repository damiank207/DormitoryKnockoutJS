@model A_Dormitory.Models.ApplicationModel
@using A_Dormitory.Extension;
@{
    ViewBag.Title = "Book a room";
}

<h2>Book a room</h2>


@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.FirstName, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.FirstName, new { htmlAttributes = new { @class = "form-control", data_bind = "value: application.FirstName" } })
                @Html.ValidationMessageFor(model => model.FirstName, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Surname, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Surname, new { htmlAttributes = new { @class = "form-control", data_bind = "value: application.Surname" } })
                @Html.ValidationMessageFor(model => model.Surname, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.AcademicYearOfStudies, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.AcademicYearOfStudies, new { htmlAttributes = new { @class = "form-control", data_bind = "value: application.AcademicYearOfStudies" } })
                @Html.ValidationMessageFor(model => model.AcademicYearOfStudies, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.CitizenshipDictModelId,  htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                
                
                @Html.KnockoutJsDropDownDictList("citizenship", "CitizenshipDictModelId", "CitizenshipDictModelId", "citizenship", "application.CitizenshipDictCode")
                @Html.ValidationMessageFor(model => model.CitizenshipDictModelId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.DateOfBirth, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.DateOfBirth, new { htmlAttributes = new { @class = "form-control", data_bind = "value: application.DateOfBirth"  } })
                @Html.ValidationMessageFor(model => model.DateOfBirth, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.CourseDictModelId,  htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.KnockoutJsDropDownDictList("course", "CourseDictModelId", "CourseDictModelId", "course", "application.CourseDictKey")
                @Html.ValidationMessageFor(model => model.CourseDictModelId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.GenderDictModelId,  htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.KnockoutJsDropDownDictList("gender", "GenderDictModelId", "GenderDictModelId","gender", "application.GenderDictKey")
                @Html.ValidationMessageFor(model => model.GenderDictModelId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.EmailAdress, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.EmailAdress, new { htmlAttributes = new { @type = "email",@class = "form-control", data_bind = "value: application.EmailAdress" } })
                @Html.ValidationMessageFor(model => model.EmailAdress, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.CollegeId, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.CollegeId, new { htmlAttributes = new { @class = "form-control", data_bind = "value: application.CollegeId" }  })
                @Html.ValidationMessageFor(model => model.CollegeId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.IndexNumber, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.IndexNumber, new { htmlAttributes = new { @class = "form-control", data_bind = "value: application.IndexNumber" } })
                @Html.ValidationMessageFor(model => model.IndexNumber, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.CourseYearDictModelId, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.KnockoutJsDropDownDictList("courseYear", "CourseYearDictModelId", "CourseYearDictModelId", "course year", "application.CourseYearDictKey")
                @Html.ValidationMessageFor(model => model.CourseYearDictModelId, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.NumberOfBedDictModelId, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.KnockoutJsDropDownDictList("numberOfBed", "NumberOfBedDictModelId", "NumberOfBedDictModelId", "number of bed", "application.NumberOfBedDictKey")
                @Html.ValidationMessageFor(model => model.NumberOfBedDictModelId, "", new { @class = "text-danger" })
            </div>
        </div>

       

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10" >
                <input  type="button" data-bind="click: validateAndSave" value="Send a request" class="mySubmitButton btn btn-success" />
            </div>
        </div>
    </div>

    <div class="progress" data-bind="visible: sending">
        <div class="progress-bar progress-bar-info progress-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
            <span class="sr-only"></span>

        </div>
    </div>
    @*<b>Ilosc w tablicy</b>
        <span data-bind='text: citizenship().length'>&nbsp;</span>*@

        @*<select class="form-control valid" data-bind="options: citizenship,  optionsText: 'Name', optionsValue: 'Code',optionsCaption: 'Choose citizenship...'" id="CitizenshipDictModelId" name="CitizenshipDictModelId"></select>*@

}

            <div>
                @Html.ActionLink("Back", "Index")
            </div>

            @section Scripts {
                @Scripts.Render("~/bundles/jqueryval")
                @Scripts.Render("/Scripts/ViewModels/ApplicationViewModel.js")
                <script>
                    ko.applyBindings(new ApplicationViewModel());
                </script>
            }
